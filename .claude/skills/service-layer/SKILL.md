---
name: service-layer
description: Service layer pattern for API integration and business logic. Use when implementing services, API clients, or data management.
version: 1.0.0
---

# Service Layer

## Overview

This skill covers architecture patterns found in the codebase. Detected 10 file(s) using this pattern.

**Trigger keywords:** service-layer, architecture, service layer

## File Structure

```
src/lib/ai-search-service.ts
src/lib/ai-search-service.ts
src/lib/ai-service.ts
src/lib/api-client.ts
```

## Implementation Pattern

```typescript
// Example from src/lib/ai-search-service.ts
/**
 * AI Search Service
 * 
 * Integrates Fireplexity-style AI search functionality with:
 * - Firecrawl for web search and scraping
 * - Oxylabs AI Studio for intelligent data extraction
 * - LLM providers for answer synthesis
 */

// ============================================================================
// Types
// ============================================================================

export type SearchMode = 'web' | 'news' | 'images' | 'academic' | 'code';

export interface AISearchConfig {
  firecrawlApiKey?: string;
  oxylabsApiKey?: string;
  groqApiKey?: string;
  openaiApiKey?: string;
...
```

```typescript
// Example from src/lib/ai-service.ts
/**
 * Unified AI Service - Routes all AI requests through Supabase Edge Functions
 * This avoids CORS issues by using the wrappers Edge Function as a proxy
 */

import { WRAPPERS_URL, getAuthToken } from './supabase';

export type Provider = 'openrouter' | 'deepseek' | 'xai' | 'anthropic' | 'gemini' | 'perplexity';

export interface ChatMessage {
  role: 'system' | 'user' | 'assistant';
  content: string;
}

export interface ChatRequest {
  provider: Provider;
  model: string;
  messages: ChatMessage[];
  temperature?: number;
  max_tokens?: number;
...
```

## Rules

### Do
- Follow established patterns in the codebase
- Use TypeScript for type safety
- Keep files focused and modular

### Don't
- Mix multiple concerns in a single file
- Ignore type definitions
- Include secrets or credentials

## File Location

Primary location: `src/lib/ai-search-service.ts`

Total files: 10

<!-- Generated by skill-master command
Version: 1.0.0
Sources:
- src/lib/ai-search-service.ts
- src/lib/ai-service.ts
- src/lib/api-client.ts

Last updated: 2026-02-13
-->
