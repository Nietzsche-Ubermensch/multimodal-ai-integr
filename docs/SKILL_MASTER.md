# Skill Master

Auto-discover codebase patterns and generate SKILL files for `.claude/skills/` directory.

## Overview

Skill Master analyzes your codebase to identify architectural patterns and automatically generates or updates SKILL files that help Claude Code understand your project better.

## Features

- ğŸ” **Pattern Discovery**: Automatically detect architectural patterns in your codebase
- ğŸ“ **SKILL Generation**: Create SKILL.md files with real code examples
- ğŸ”„ **Smart Updates**: Preserve custom content while updating generated sections
- ğŸ“Š **Gap Analysis**: Compare detected patterns with existing skills
- ğŸ—ï¸ **Multi-Platform**: Support for React, Node.js, TypeScript, Python, and more

## Installation

The required dependencies are already included in the project:

```bash
npm install
```

## Usage

### Discover Mode

Analyze your codebase and report missing skills:

```bash
npm run skill-master:discover
```

Output example:
```
ğŸ” Discovering patterns...

Detected Platforms: React, TypeScript

Detected Patterns: 4
| Pattern | Files Found | Example Location |
|---------|-------------|------------------|
| custom-hooks | 3 | src/hooks/useAIModels.ts |
| service-layer | 15 | src/lib/ai-service.ts |
| ui-components | 51 | src/components/ui/button.tsx |
| type-definitions | 8 | src/types/modelhub.ts |

Existing Skills: 0
Missing Skills: 4
- custom-hooks: React Patterns, 3 files found
- service-layer: Architecture, 15 files found
- ui-components: UI Patterns, 51 files found
- type-definitions: TypeScript Patterns, 8 files found
```

### Generate Mode

Create SKILL files from detected patterns:

```bash
npm run skill-master:generate
```

This will:
1. Analyze your codebase for patterns
2. Extract code examples from relevant files
3. Generate SKILL.md files in `.claude/skills/{pattern-name}/`
4. Include version tracking and source markers

Output example:
```
âš™ï¸  Generating SKILL files...

SKILL GENERATION REPORT

Skills Generated: 4

custom-hooks [CREATED]
â”œâ”€â”€ Analyzed: 3 source files
â”œâ”€â”€ Sources: src/hooks/useAIModels.ts, src/hooks/useSupabaseAI.ts
â””â”€â”€ Output: .claude/skills/custom-hooks/SKILL.md (85 lines)

service-layer [CREATED]
â”œâ”€â”€ Analyzed: 15 source files
â”œâ”€â”€ Sources: src/lib/ai-service.ts, src/lib/api-service.ts
â””â”€â”€ Output: .claude/skills/service-layer/SKILL.md (92 lines)

Validation:
âœ“ YAML frontmatter valid
âœ“ Description includes trigger keywords
âœ“ Content under 500 lines
âœ“ Has required sections
```

## Generated SKILL Structure

Each generated SKILL.md follows this structure:

```markdown
---
name: pattern-name
description: Pattern description with trigger keywords
version: 1.0.0
---

# Pattern Name

## Overview
Brief description of the pattern

## File Structure
Location and organization of pattern files

## Implementation Pattern
Real code examples from your codebase

## Rules
### Do
- Best practices from codebase

### Don't
- Anti-patterns to avoid

## File Location
Actual paths from codebase

<!-- Generated by skill-master command
Version: 1.0.0
Sources:
- path/to/source1.ts
- path/to/source2.ts
Last updated: YYYY-MM-DD
-->
```

## Platform Detection

Skill Master automatically detects your platform based on configuration files:

| Platform | Detection Files | Reference |
|----------|-----------------|-----------|
| React | `package.json` with `react` | `references/react-web.md` |
| Node.js | `package.json` | `references/node.md` |
| TypeScript | `tsconfig.json` | `references/typescript.md` |
| Python | `pyproject.toml`, `requirements.txt` | `references/python.md` |
| Generic | Fallback | `references/generic.md` |

## Pattern Categories

Currently detects:

### React Patterns
- **Custom Hooks**: Reusable stateful logic (`src/hooks/`)
- **UI Components**: Radix UI and shadcn/ui components (`src/components/ui/`)

### Architecture
- **Service Layer**: API integration and business logic (`src/lib/`)

### TypeScript Patterns
- **Type Definitions**: TypeScript interfaces and types (`src/types/`)

## Update Strategy

When running generate mode on existing SKILL files:

1. **First time (no marker)**: Backs up to `.bak` file, generates fresh SKILL.md
2. **Subsequent runs (has marker)**: Smart merge, preserves custom sections
3. **Version tracking**: Increments version appropriately

## Safety Features

- âœ… Never writes outside `.claude/skills/`
- âœ… Backs up existing files before modification
- âœ… Preserves user customizations
- âœ… No secrets or credentials in generated files
- âœ… Deterministic output

## Integration with Claude Code

Generated SKILL files help Claude Code:
- Understand your project structure
- Follow your coding conventions
- Use the right patterns for new code
- Make context-aware suggestions

Trigger keywords in descriptions ensure Claude Code activates the right skills automatically.

## Extending Pattern Detection

To add new patterns, edit `src/lib/skill-master.ts` and:

1. Add detection logic in `discoverPatterns()`
2. Update `getDescriptionForPattern()` with trigger keywords
3. Add platform-specific reference files in `references/`

## Example: Custom Hooks Pattern

```yaml
---
name: custom-hooks
description: React custom hooks pattern for reusable stateful logic. Use when creating hooks, managing state, or extracting component logic.
version: 1.0.0
---

# Custom Hooks

## Overview
This skill covers React patterns patterns found in the codebase. Detected 3 file(s) using this pattern.

**Trigger keywords:** custom-hooks, react patterns, custom hooks

## Implementation Pattern
```typescript
// Example from src/hooks/useAIModels.ts
import { useState, useEffect } from 'react';
import type { AIModel } from '@/types/modelhub';

export function useAIModels() {
  const [models, setModels] = useState<AIModel[]>([]);
  // ... implementation
}
```
```

## Troubleshooting

### "No patterns found"
- Ensure you're running from project root
- Check that `src/` directory exists
- Verify platform detection files are present

### "Permission denied"
- Ensure `.claude/skills/` directory is writable
- Check file permissions

### TypeScript errors
- Run `npm install` to ensure dependencies are installed
- Check that `@types/node` is in devDependencies

## Contributing

To improve pattern detection:
1. Add new patterns to `discoverPatterns()` function
2. Create reference files for new platforms
3. Update documentation

## License

Same as the parent project.
